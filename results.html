<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Match Results - Ragnarok</title>
        <script src="js/template.js"></script>
        <link rel="stylesheet" href="results.css" />
    </head>
    <body>
        <!-- FOUC Prevention-->
        <div id="loader">
            <canvas id="loadingCanvas" width="100" height="100"></canvas>
        </div>
        <div id="nav-placeholder"></div>

        <div class="section">
            <div class="container">
                <h2>Match Results</h2>
                <div id="header" class="stats-overview">
                    <!-- Stats will be populated by JavaScript -->
                </div>

                <div class="rankings-section">
                    <h3>League Rankings</h3>
                    <div class="table-controls">
                        <input
                            type="text"
                            class="search-box"
                            placeholder="Search teams..."
                            id="searchBox"
                        />
                        <button class="sort-button active" data-sort="rank">
                            Ranked
                        </button>
                        <button class="sort-button" data-sort="auto">
                            Best Auto
                        </button>
                        <button class="sort-button" data-sort="teleop">
                            Best TeleOp
                        </button>
                        <button class="sort-button" data-sort="total">
                            Most Points
                        </button>
                    </div>

                    <div class="table-container">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Rank</th>
                                    <th>Team</th>
                                    <th>Record (W-L-T)</th>
                                    <th>Matches</th>
                                    <th>Auto</th>
                                    <th>TeleOp</th>
                                    <th>End</th>
                                    <th>Total</th>
                                </tr>
                            </thead>
                            <tbody id="matchResults">
                                <!-- Rankings will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div id="footer-placeholder"></div>

        <script src="js/results.js"></script>

        <script>
            // FOUC Prevention

            // Fade in on load
            window.addEventListener("DOMContentLoaded", () => {
                document.body.classList.add("fade-in");
            });

            // Fade out when leaving
            document.querySelectorAll("a").forEach(link => {
                link.addEventListener("click", e => {
                // Only apply to internal links (skip external/new tab)
                if (link.hostname === window.location.hostname && link.target !== "_blank") {
                    e.preventDefault(); // stop default link behavior
                    document.body.classList.add("fade-out");
                    setTimeout(() => {
                    window.location = link.href;
                    }, 500); // match transition time
                }
                });
            });

            // FOUC Prevention
        </script>
    </body>
</html>
