<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Match Results - Ragnarok</title>
        <script src="js/template.js"></script>
        <link rel="stylesheet" href="results.css" />
    </head>
    <body>
        <!-- FOUC Prevention-->
         <div id="loader">
            <canvas id="loadingCanvas" width="100" height="100"></canvas>
        </div>
        <div id="nav-placeholder"></div>

        <div class="section">
            <div class="container">
                <h2>Match Results</h2>
                <div id="header" class="stats-overview">
                    <!-- Stats will be populated by JavaScript -->
                </div>

                <div class="rankings-section">
                    <h3>League Rankings</h3>
                    <div class="table-controls">
                        <input
                            type="text"
                            class="search-box"
                            placeholder="Search teams..."
                            id="searchBox"
                        />
                        <button class="sort-button active" data-sort="rank">
                            Ranked
                        </button>
                        <button class="sort-button" data-sort="auto">
                            Best Auto
                        </button>
                        <button class="sort-button" data-sort="teleop">
                            Best TeleOp
                        </button>
                        <button class="sort-button" data-sort="total">
                            Most Points
                        </button>
                    </div>

                    <div class="table-container">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Rank</th>
                                    <th>Team</th>
                                    <th>Record (W-L-T)</th>
                                    <th>Matches</th>
                                    <th>Auto</th>
                                    <th>TeleOp</th>
                                    <th>End</th>
                                    <th>Total</th>
                                </tr>
                            </thead>
                            <tbody id="matchResults">
                                <!-- Rankings will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div id="footer-placeholder"></div>

        <script src="js/results.js"></script>
        <script>
            // FOUC prevention \/
            const canvas = document.getElementById("loadingCanvas");
            const ctx = canvas.getContext("2d");
            let angle = 0;

            // Text below the spinner
            

            function drawLoader() {
                ctx.clearRect(0,0,canvas.width,canvas.height);
                ctx.beginPath();
                ctx.arc(50,50,30, angle, angle + Math.PI/1.5);
                ctx.lineWidth = 6;
                ctx.strokeStyle = "#333";
                ctx.stroke();
                angle += 0.01; // rotation speed

                
            }

            drawLoader();


            window.addEventListener("load", () => {
                const loader = document.getElementById("loader");
                loader.style.opacity = 0; // fade out
                setTimeout(() => loader.style.display = "none", 500);
                document.body.classList.remove("hidden");
            });

            document.querySelectorAll("a").forEach(link => {
            link.addEventListener("click", e => {
                e.preventDefault();
                const href = link.href;
                document.getElementById("loader").style.display = "flex";
                document.body.classList.add("hidden");
                setTimeout(() => window.location.href = href, 200); // show loader briefly
            });
            });





            // FOUC prevention /\
        </script>
    </body>
</html>
